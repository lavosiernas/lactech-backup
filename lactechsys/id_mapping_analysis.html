<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Análise de IDs - Funcionário</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .section { margin: 20px 0; padding: 15px; border: 1px solid #ccc; border-radius: 5px; }
        .success { background-color: #d4edda; border-color: #c3e6cb; }
        .error { background-color: #f8d7da; border-color: #f5c6cb; }
        .warning { background-color: #fff3cd; border-color: #ffeaa7; }
        .info { background-color: #d1ecf1; border-color: #bee5eb; }
        pre { background-color: #f8f9fa; padding: 10px; border-radius: 3px; overflow-x: auto; }
        table { width: 100%; border-collapse: collapse; margin: 10px 0; }
        th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
        th { background-color: #f2f2f2; }
    </style>
</head>
<body>
    <h1>Análise de IDs - Página do Funcionário</h1>
    <div id="results"></div>

    <script>
        const results = document.getElementById('results');
        
        function addResult(title, content, type = 'info') {
            const div = document.createElement('div');
            div.className = `section ${type}`;
            div.innerHTML = `
                <h3>${title}</h3>
                <div>${content}</div>
            `;
            results.appendChild(div);
        }

        function runAnalysis() {
            addResult('Análise de IDs', 'Verificando mapeamento entre JavaScript e HTML...', 'info');

            // IDs que o JavaScript está tentando acessar
            const jsIds = [
                'activityList',
                'productionChart', 
                'todayVolume',
                'todayRecords',
                'weekAverage',
                'bestDay',
                'currentDateTime',
                'farmNameHeader',
                'employeeName',
                'employeeWelcome',
                'profileName',
                'profileFullName',
                'profileFarmName',
                'profileEmail2',
                'profilePhone',
                'headerProfilePhoto',
                'headerProfileIcon',
                'modalProfilePhoto',
                'modalProfileIcon'
            ];

            // IDs que existem no HTML
            const htmlIds = [
                'farmNameHeader',
                'headerProfilePhoto',
                'headerProfileIcon',
                'employeeName',
                'employeeWelcome',
                'todayVolume',
                'weekAverage',
                'todayRecords',
                'bestDay',
                'activityList',
                'productionChart',
                'currentDateTime',
                'productionForm',
                'volume',
                'date',
                'time',
                'milkingType',
                'temperature',
                'observations',
                'fat',
                'protein',
                'lactose',
                'historyFilter',
                'dateRangeInputs',
                'startDate',
                'endDate',
                'historyList',
                'previewPeriod',
                'previewContent',
                'profileModal',
                'modalProfilePhoto',
                'modalProfileIcon',
                'profileName',
                'profileFarmName',
                'personalInfoSection',
                'profileFullName',
                'profileEmail2',
                'profilePhone',
                'photoSection',
                'editEmployeePhotoBtn',
                'employeePhotoViewMode',
                'employeePhotoContainer',
                'employeePhotoPlaceholder',
                'employeePhotoImage',
                'employeePhotoEditMode',
                'employeePhotoPreview',
                'employeePhotoPreviewPlaceholder',
                'employeePhotoPreviewImage',
                'employeePhotoUpload',
                'changePasswordSection',
                'changePasswordForm',
                'primaryAccountSection',
                'switchToPrimaryBtn',
                'dangerZoneSection',
                'notificationToast',
                'toastMessage'
            ];

            // Verificar quais IDs do JavaScript existem no HTML
            const missingIds = [];
            const foundIds = [];

            jsIds.forEach(id => {
                if (htmlIds.includes(id)) {
                    foundIds.push(id);
                } else {
                    missingIds.push(id);
                }
            });

            // Criar tabela de análise
            let tableHtml = `
                <table>
                    <tr>
                        <th>ID</th>
                        <th>Status</th>
                        <th>Usado em</th>
                    </tr>
            `;

            jsIds.forEach(id => {
                const status = htmlIds.includes(id) ? '✅ ENCONTRADO' : '❌ FALTANDO';
                const usedIn = id === 'activityList' || id === 'productionChart' || id === 'todayVolume' || id === 'todayRecords' || id === 'weekAverage' || id === 'bestDay' ? 'funcionario_functions_fixed.js' : 'funcionario.html';
                tableHtml += `
                    <tr>
                        <td><strong>${id}</strong></td>
                        <td>${status}</td>
                        <td>${usedIn}</td>
                    </tr>
                `;
            });

            tableHtml += '</table>';

            addResult('Mapeamento de IDs', tableHtml, missingIds.length > 0 ? 'error' : 'success');

            if (missingIds.length > 0) {
                addResult('IDs Faltando', `
                    <p><strong>Os seguintes IDs estão sendo usados no JavaScript mas não existem no HTML:</strong></p>
                    <ul>
                        ${missingIds.map(id => `<li><code>${id}</code></li>`).join('')}
                    </ul>
                `, 'error');
            }

            if (foundIds.length > 0) {
                addResult('IDs Encontrados', `
                    <p><strong>Os seguintes IDs estão corretos:</strong></p>
                    <ul>
                        ${foundIds.map(id => `<li><code>${id}</code></li>`).join('')}
                    </ul>
                `, 'success');
            }

            // Análise específica dos IDs críticos
            const criticalIds = ['activityList', 'productionChart', 'todayVolume', 'todayRecords', 'weekAverage', 'bestDay'];
            const missingCritical = criticalIds.filter(id => !htmlIds.includes(id));
            const foundCritical = criticalIds.filter(id => htmlIds.includes(id));

            if (missingCritical.length > 0) {
                addResult('IDs Críticos Faltando', `
                    <p><strong>IDs críticos que estão faltando (causam o problema de "Carregando..."):</strong></p>
                    <ul>
                        ${missingCritical.map(id => `<li><code>${id}</code> - usado em funcionario_functions_fixed.js</li>`).join('')}
                    </ul>
                `, 'error');
            } else {
                addResult('IDs Críticos', `
                    <p><strong>Todos os IDs críticos estão presentes:</strong></p>
                    <ul>
                        ${foundCritical.map(id => `<li><code>${id}</code></li>`).join('')}
                    </ul>
                `, 'success');
            }

            addResult('Conclusão', `
                <p><strong>Status:</strong> ${missingIds.length === 0 ? '✅ TODOS OS IDs ESTÃO CORRETOS' : '❌ EXISTEM IDs FALTANDO'}</p>
                <p><strong>Próximo passo:</strong> ${missingIds.length === 0 ? 'Verificar se há outros problemas no JavaScript' : 'Adicionar os IDs faltantes ao HTML'}</p>
            `, missingIds.length === 0 ? 'success' : 'error');
        }

        // Executar análise quando a página carregar
        document.addEventListener('DOMContentLoaded', runAnalysis);
    </script>
</body>
</html> 