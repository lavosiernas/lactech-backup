<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gerador de QR Codes PIX - LacTech</title>
    <script src="https://cdn.jsdelivr.net/npm/qrcode@1.5.3/build/qrcode.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .card-shadow {
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        }
        .animate-fade-in {
            animation: fadeIn 0.5s ease-in-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body class="bg-gray-50 min-h-screen">
    <div class="container mx-auto px-4 py-8">
        <div class="max-w-4xl mx-auto">
            <!-- Header -->
            <div class="text-center mb-8">
                <h1 class="text-4xl font-bold text-gray-800 mb-2">Gerador de QR Codes PIX</h1>
                <p class="text-gray-600">LacTech Sistema Leiteiro</p>
            </div>

            <!-- Demo Section -->
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                
                <!-- Left Panel - QR Code Generator -->
                <div class="bg-white rounded-2xl p-8 card-shadow">
                    <h2 class="text-2xl font-bold text-gray-800 mb-6">Gerador de QR Code</h2>
                    
                    <div class="space-y-6">
                        <!-- Simple QR Code -->
                        <div class="border border-gray-200 rounded-xl p-6">
                            <h3 class="text-lg font-semibold text-gray-800 mb-4">QR Code Simples</h3>
                            <div class="space-y-4">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Valor (R$)</label>
                                    <input type="number" id="simple-amount" value="50.00" step="0.01" 
                                           class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Descri√ß√£o</label>
                                    <input type="text" id="simple-description" value="Pagamento LacTech" 
                                           class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent">
                                </div>
                                <button onclick="generateSimpleQR()" 
                                        class="w-full bg-green-600 text-white py-3 px-6 rounded-xl hover:bg-green-700 transition-colors font-semibold">
                                    üîÑ Gerar QR Code Simples
                                </button>
                            </div>
                        </div>

                        <!-- Bank Charge QR Code -->
                        <div class="border border-gray-200 rounded-xl p-6">
                            <h3 class="text-lg font-semibold text-gray-800 mb-4">QR Code da Cobran√ßa</h3>
                            <div class="space-y-4">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Valor (R$)</label>
                                    <input type="number" id="charge-amount" value="100.00" step="0.01" 
                                           class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">ID da Cobran√ßa</label>
                                    <input type="text" id="charge-id" value="COBRANCA_12345" 
                                           class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Nome da Empresa</label>
                                    <input type="text" id="merchant-name" value="LacTech Sistema Leiteiro" 
                                           class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Cidade</label>
                                    <input type="text" id="merchant-city" value="SAO PAULO" 
                                           class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent">
                                </div>
                                <button onclick="generateBankChargeQR()" 
                                        class="w-full bg-blue-600 text-white py-3 px-6 rounded-xl hover:bg-blue-700 transition-colors font-semibold">
                                    üè¶ Gerar QR Code da Cobran√ßa
                                </button>
                            </div>
                        </div>

                        <!-- Custom PIX Key QR Code -->
                        <div class="border border-gray-200 rounded-xl p-6">
                            <h3 class="text-lg font-semibold text-gray-800 mb-4">QR Code com Chave Personalizada</h3>
                            <div class="space-y-4">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Valor (R$)</label>
                                    <input type="number" id="custom-amount" value="25.00" step="0.01" 
                                           class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Chave PIX</label>
                                    <input type="text" id="custom-pix-key" value="12345678901" 
                                           class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Tipo da Chave</label>
                                    <select id="custom-pix-type" 
                                            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent">
                                        <option value="email">E-mail</option>
                                        <option value="cpf">CPF</option>
                                        <option value="telefone">Telefone</option>
                                        <option value="aleatoria">Aleat√≥ria</option>
                                    </select>
                                </div>
                                <button onclick="generateCustomPixQR()" 
                                        class="w-full bg-purple-600 text-white py-3 px-6 rounded-xl hover:bg-purple-700 transition-colors font-semibold">
                                    üîë Gerar QR Code Personalizado
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Right Panel - QR Code Display -->
                <div class="bg-white rounded-2xl p-8 card-shadow">
                    <h2 class="text-2xl font-bold text-gray-800 mb-6">QR Code Gerado</h2>
                    
                    <div id="qr-display" class="text-center">
                        <div class="w-64 h-64 bg-gray-100 rounded-xl flex items-center justify-center mx-auto mb-6">
                            <span class="text-gray-400 text-sm">QR Code aparecer√° aqui</span>
                        </div>
                        
                        <div id="qr-info" class="space-y-4 text-left">
                            <div class="bg-gray-50 rounded-xl p-4">
                                <h3 class="font-semibold text-gray-800 mb-2">Informa√ß√µes do QR Code</h3>
                                <div class="space-y-2 text-sm">
                                    <div><strong>Valor:</strong> <span id="qr-amount">-</span></div>
                                    <div><strong>Chave PIX:</strong> <span id="qr-pix-key">-</span></div>
                                    <div><strong>ID da Transa√ß√£o:</strong> <span id="qr-txid">-</span></div>
                                    <div><strong>Expira em:</strong> <span id="qr-expires">-</span></div>
                                </div>
                            </div>
                            
                            <div class="bg-gray-50 rounded-xl p-4">
                                <h3 class="font-semibold text-gray-800 mb-2">C√≥digo EMV</h3>
                                <div class="bg-gray-100 p-3 rounded-lg">
                                    <code id="qr-emv" class="text-xs break-all">-</code>
                                </div>
                                <button onclick="copyEMVCode()" 
                                        class="mt-2 text-green-600 text-sm hover:text-green-700 font-medium">
                                    üìã Copiar c√≥digo EMV
                                </button>
                            </div>
                            
                            <div class="bg-gray-50 rounded-xl p-4">
                                <h3 class="font-semibold text-gray-800 mb-2">Valida√ß√£o</h3>
                                <div id="qr-validation" class="text-sm">
                                    <span class="text-gray-500">Clique em gerar para validar</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Examples Section -->
            <div class="mt-12 bg-white rounded-2xl p-8 card-shadow">
                <h2 class="text-2xl font-bold text-gray-800 mb-6">Exemplos de Uso</h2>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="border border-gray-200 rounded-xl p-6">
                        <h3 class="text-lg font-semibold text-gray-800 mb-4">QR Code Simples</h3>
                        <p class="text-gray-600 mb-4">Gera um QR code PIX b√°sico com valor e descri√ß√£o.</p>
                        <button onclick="generateExample1()" 
                                class="bg-green-600 text-white py-2 px-4 rounded-lg hover:bg-green-700 transition-colors">
                            Testar Exemplo
                        </button>
                    </div>
                    
                    <div class="border border-gray-200 rounded-xl p-6">
                        <h3 class="text-lg font-semibold text-gray-800 mb-4">QR Code da Cobran√ßa</h3>
                        <p class="text-gray-600 mb-4">Gera QR code baseado em cobran√ßa do banco com ID espec√≠fico.</p>
                        <button onclick="generateExample2()" 
                                class="bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors">
                            Testar Exemplo
                        </button>
                    </div>
                    
                    <div class="border border-gray-200 rounded-xl p-6">
                        <h3 class="text-lg font-semibold text-gray-800 mb-4">QR Code Personalizado</h3>
                        <p class="text-gray-600 mb-4">Gera QR code com chave PIX personalizada (CPF, telefone, etc.).</p>
                        <button onclick="generateExample3()" 
                                class="bg-purple-600 text-white py-2 px-4 rounded-lg hover:bg-purple-700 transition-colors">
                            Testar Exemplo
                        </button>
                    </div>
                    
                    <div class="border border-gray-200 rounded-xl p-6">
                        <h3 class="text-lg font-semibold text-gray-800 mb-4">Decodificar QR Code</h3>
                        <p class="text-gray-600 mb-4">Testa a decodifica√ß√£o de um QR code PIX existente.</p>
                        <button onclick="decodeExample()" 
                                class="bg-orange-600 text-white py-2 px-4 rounded-lg hover:bg-orange-700 transition-colors">
                            Testar Decodifica√ß√£o
                        </button>
                    </div>
                </div>
            </div>

            <!-- Documentation -->
            <div class="mt-12 bg-gray-900 rounded-2xl p-8 text-white">
                <h2 class="text-2xl font-bold mb-6">Documenta√ß√£o</h2>
                
                <div class="space-y-6">
                    <div>
                        <h3 class="text-lg font-semibold mb-3">Como Usar</h3>
                        <div class="bg-gray-800 rounded-xl p-4">
                            <pre class="text-sm overflow-x-auto"><code>// 1. QR Code Simples
const qrData = qrGenerator.generateSimplePixQR(50.00, 'Descri√ß√£o');

// 2. QR Code da Cobran√ßa
const chargeData = {
    amount: 100.00,
    chargeId: 'COBRANCA_12345',
    merchantName: 'Empresa',
    merchantCity: 'CIDADE'
};
const qrData = qrGenerator.generateQRFromBankCharge(chargeData);

// 3. QR Code Personalizado
const qrData = qrGenerator.generateCustomPixQR(25.00, '12345678901', 'cpf');</code></pre>
                        </div>
                    </div>
                    
                    <div>
                        <h3 class="text-lg font-semibold mb-3">Formato EMV</h3>
                        <p class="text-gray-300">O QR code segue o padr√£o EMV QR Code PIX do Banco Central:</p>
                        <ul class="list-disc list-inside text-gray-300 mt-2 space-y-1">
                            <li><strong>000201:</strong> Payload Format Indicator (QR Code)</li>
                            <li><strong>010212:</strong> Point of Initiation Method (Static)</li>
                            <li><strong>26:</strong> Merchant Account Information</li>
                            <li><strong>0014br.gov.bcb.pix:</strong> GUI (PIX)</li>
                            <li><strong>01XXchave:</strong> PIX Key</li>
                            <li><strong>52040000:</strong> Merchant Category Code</li>
                            <li><strong>5303986:</strong> Transaction Currency (BRL)</li>
                            <li><strong>54XXvalor:</strong> Transaction Amount</li>
                            <li><strong>5802BR:</strong> Country Code</li>
                            <li><strong>59XXnome:</strong> Merchant Name</li>
                            <li><strong>60XXcidade:</strong> Merchant City</li>
                            <li><strong>62:</strong> Additional Data Field Template</li>
                            <li><strong>05XXtxid:</strong> Reference Label</li>
                            <li><strong>6304XXXX:</strong> CRC16</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="pix_qr_generator.js"></script>
    <script>
        // Fun√ß√µes para a interface
        function generateSimpleQR() {
            const amount = parseFloat(document.getElementById('simple-amount').value);
            const description = document.getElementById('simple-description').value;
            
            const qrData = qrGenerator.generateSimplePixQR(amount, description);
            displayQRCode(qrData);
        }

        function generateBankChargeQR() {
            const amount = parseFloat(document.getElementById('charge-amount').value);
            const chargeId = document.getElementById('charge-id').value;
            const merchantName = document.getElementById('merchant-name').value;
            const merchantCity = document.getElementById('merchant-city').value;
            
            const chargeData = {
                amount: amount,
                chargeId: chargeId,
                merchantName: merchantName,
                merchantCity: merchantCity
            };
            
            const qrData = qrGenerator.generateQRFromBankCharge(chargeData);
            displayQRCode(qrData);
        }

        function generateCustomPixQR() {
            const amount = parseFloat(document.getElementById('custom-amount').value);
            const pixKey = document.getElementById('custom-pix-key').value;
            const pixType = document.getElementById('custom-pix-type').value;
            
            const qrData = qrGenerator.generateCustomPixQR(amount, pixKey, pixType);
            displayQRCode(qrData);
        }

        function displayQRCode(qrData) {
            // Gerar QR Code visual
            const qrDisplay = document.getElementById('qr-display');
            const qrContainer = qrDisplay.querySelector('.w-64.h-64');
            
            qrContainer.innerHTML = '';
            QRCode.toCanvas(qrContainer, qrData.qrCode, {
                width: 256,
                margin: 2,
                color: {
                    dark: '#000000',
                    light: '#FFFFFF'
                }
            }, function (error) {
                if (error) {
                    qrContainer.innerHTML = '<span class="text-red-400 text-sm">Erro ao gerar QR Code</span>';
                }
            });

            // Atualizar informa√ß√µes
            document.getElementById('qr-amount').textContent = `R$ ${qrData.amount.toFixed(2)}`;
            document.getElementById('qr-pix-key').textContent = qrData.pixKey;
            document.getElementById('qr-txid').textContent = qrData.txid;
            document.getElementById('qr-expires').textContent = new Date(qrData.expiresAt).toLocaleString('pt-BR');
            document.getElementById('qr-emv').textContent = qrData.qrCode;

            // Validar QR Code
            const validation = qrGenerator.validateQRCode(qrData.qrCode);
            const validationElement = document.getElementById('qr-validation');
            
            if (validation.valid) {
                validationElement.innerHTML = '<span class="text-green-600">‚úÖ QR Code v√°lido</span>';
            } else {
                validationElement.innerHTML = `<span class="text-red-600">‚ùå ${validation.error}</span>`;
            }
        }

        function copyEMVCode() {
            const emvCode = document.getElementById('qr-emv').textContent;
            navigator.clipboard.writeText(emvCode).then(() => {
                alert('C√≥digo EMV copiado!');
            }).catch(() => {
                alert('Erro ao copiar c√≥digo');
            });
        }

        // Exemplos
        function generateExample1() {
            document.getElementById('simple-amount').value = '75.50';
            document.getElementById('simple-description').value = 'Assinatura LacTech Pro';
            generateSimpleQR();
        }

        function generateExample2() {
            document.getElementById('charge-amount').value = '150.00';
            document.getElementById('charge-id').value = 'COBRANCA_2024001';
            document.getElementById('merchant-name').value = 'LacTech Sistema Leiteiro';
            document.getElementById('merchant-city').value = 'SAO PAULO';
            generateBankChargeQR();
        }

        function generateExample3() {
            document.getElementById('custom-amount').value = '30.00';
            document.getElementById('custom-pix-key').value = '11987654321';
            document.getElementById('custom-pix-type').value = 'telefone';
            generateCustomPixQR();
        }

        function decodeExample() {
            const qrCode = '00020126580014BR.GOV.BCB.PIX0136ebabf96f-5162-4bd1-95c5-64ffa8e9bfed52040000530398654041.005802BR5924Francisco Lavosier Silva6009SAO PAULO62140510d7tboHbbcE6304802C';
            
            const decoded = qrGenerator.decodeQRCode(qrCode);
            console.log('QR Code decodificado:', decoded);
            
            alert('QR Code decodificado! Verifique o console para ver os detalhes.');
        }

        // Inicializar com um exemplo
        window.addEventListener('load', () => {
            generateExample1();
        });
    </script>
</body>
</html>
